<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Address Book</title>
    <!-- Bootstrap so it dosen't loop 100% ugly -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/css/bootstrap.min.css" integrity="sha384-/Y6pD6FV/Vv2HJnA6t+vslU6fwYXjCFtcEpHbNJ0lyAFsXTsjBbfaDjzALeQsN6M" crossorigin="anonymous">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <!-- Not the most elegant way to use angular, type script would be better but I don't have much
        expirence in ts so it would take much longer -->
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.4/angular.min.js"></script>

    <style>
        body {
            padding-top: 5rem;
        }
    </style>

</head>
<body ng-app="address-book">


<nav class="navbar navbar-dark bg-dark fixed-top">
    <a class="navbar-brand" href="#">Address Book</a>
</nav>

<!-- Main Body -->
<div class="container"  ng-controller="address-list">

    <div class="row">
        <div class="col-sm-5">Name</div>
        <div class="col-sm-5">Email</div>
    </div>

    <div class="row" ng-repeat="address in addresses">
        <div class="col-sm-5">{{address.name}}</div>
        <div class="col-sm-5">{{address.email}}</div>
    </div>

    <div class="row", ng-show="has_pages">
        TODO: next buttons
    </div>

</div>

<script>
    // we're just going to create a single component application
    // mainly I want to use angulars ng-repeat and a few similar things
    var app = angular.module("address-book", [])

    app.controller("address-list", function ($scope, $http) {
        // load the list of addresses
        $http({
            "method" : "GET",
            "url" : "/address"
        }).then(function onSuccess(response) {
            console.log(response);
            $scope.addresses = response.data.entries;
            $scope.has_pages = response.data.is_more;
        }, function onFailure(response) {
            alert("Failed to load data!");
        })
    });
</script>
</body>
</html>